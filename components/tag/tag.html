<md-content class="background-container"
            style="max-height: 100%"
            ng-controller="TagsController as tagsCtrl" layout="column"
            flex
            md-swipe-left="mainCtrl.toggleRightSidebar()"
            md-swipe-right="mainCtrl.toggleLeftSidebar()"
            ng-if="mainCtrl.isDesktop"
            xmlns="http://www.w3.org/1999/html">
    <md-toolbar
        ng-class="{'md-tall': tagsCtrl.header.image}"
        vnb-bg-color={{mainCtrl.headerColor}}>
        <section flex
            back-img="{{tagsCtrl.header.image.link}}">
        <section layout="row" layout-align="start center" class="header-strip">
            <section layout="row" flex
                     layout-align="start center">
                <section layout="row" layout-align="start center" flex class="vnb-page-title">
                <span ng-if="tagsCtrl.home">
                    Home
                </span>
                <span>
                    {{tagsCtrl.corner}}
                </span>
                </section>

            </section>
            <section layout="row"
                     layout-align="end center" class="vnb-hamburger">
                <md-button ng-show="!mainCtrl.user"
                           ng-click="mainCtrl.login()"
                            aria-label="login">
                    <i class="fa fa-facebook-square"></i>
                    <md-tooltip>Login</md-tooltip>
                </md-button>
                <section class="dropdown" ng-if="mainCtrl.user">
                    <img ng-src="{{'http://graph.facebook.com/' + mainCtrl.user.facebook_id + '/picture'}}"
                         alt="user"
                         class="header-face"/>
                        <span class="dropdown-toggle caret-container"
                              ng-show="(mainCtrl.user.positions.post_positions.length)">
                            <i class="fa fa-caret-down"></i>
                        </span>
                    <ul class="dropdown-menu" style="margin-left: -100px; margin-top: -10px">
                        <li ng-show="(mainCtrl.user.positions.post_positions.length)">
                            <a href ui-sref="create">New Post</a>
                        </li>
                        <li ng-show="mainCtrl.user.positions.manage_positions.length">
                            <a href ui-sref="manage">Manage</a>
                        </li>
                        <li ng-show="tagsCtrl.canEdit">
                            <a href ng-click="tagsCtrl.updateHeaderImage()">Change image</a>
                        </li>
                    </ul>
                </section>

            </section>
        </section>
        </section>
    </md-toolbar>

    <section layout="row" flex layout-align="center start"
             class="background-container">
        <section layout="column" flex
                 style="max-width:620px; margin-left: 8px;" >
            <section layout="row"
                     layout-align="center center">
                <md-button class="vnb-tab vnb-tab-left"
                           md-ink-ripple="#777"
                           id="dtab2" aria-controls="dtab2-content"
                           ng-class="{'vnb-tab-current': (tagsCtrl.selectedIndex == 1)}"
                           ng-click="tagsCtrl.changeTab(1)">
                    Updates
                </md-button>
                <md-button class="vnb-tab vnb-tab-right"
                           md-ink-ripple="#777"
                           id="dtab1" aria-controls="dtab1-content"
                           ng-class="{'vnb-tab-current': (tagsCtrl.selectedIndex == 2)}"
                           ng-click="tagsCtrl.changeTab(2)">
                    Coming up
                </md-button>

                <md-button class="vnb-button-round"
                           md-ink-ripple="#777"
                           ng-click="tagsCtrl.reloadData()"
                           style="margin: 16px 8px 0px 8px"
                    >
                    <i class="fa fa-repeat"></i>
                </md-button>
            </section>
            <section layout="row"
                     class="md-padding main-content"
                     style="max-width: 620px">
                <ng-switch on="tagsCtrl.selectedIndex"
                           class="tabpanel-container"
                           flex
                           layout="row" layout-align="center start">
                    <div role="tabpanel" id="dtab2-content" flex
                         aria-labelledby="dtab2" ng-switch-when="1">
                        <section
                            ng-include="'components/tag/whats_new.html'"></section>
                    </div>
                    <div role="tabpanel" id="dtab1-content" flex
                         aria-labelledby="dtab1" ng-switch-when="2">
                        <section
                            ng-include="'components/tag/coming_up.html'"></section>
                    </div>

                </ng-switch>
            </section>
        </section>
        <section layout="column" flex style="margin-right:8px;
        max-width: 320px;"
             ng-hide="(tagsCtrl.schedule.length == 0)">
            <md-content class="background-container">
                <section ui-view="right"
                         style="margin-top: 20px; max-width: 320px; min-width:240px">

                         </section>
            </md-content>
        </section>
    </section>
</md-content>

<md-content class="background-container"
            ng-controller="TagsController as tagsCtrl" layout="column"
            flex
            md-swipe-left="mainCtrl.toggleRightSidebar()"
            md-swipe-right="mainCtrl.toggleLeftSidebar()"
            ng-if="!mainCtrl.isDesktop">
    <md-toolbar vnb-bg-color="{{mainCtrl.headerColor}}">
        <section layout="row" layout-align="start center" class="header-strip">
            <section layout="row"
                     layout-align="start center"
                     class="vnb-hamburger" hide-gt-md>
                        <span ng-click="mainCtrl.toggleLeftSidebar()">
                            <i class="fa fa-bars vnb-nav-icon"></i>
                        </span>
            </section>
            <section layout="row" flex
                     layout-align="start center">
                <section layout="row" layout-align="start center" flex class="vnb-page-title">
                <span ng-if="tagsCtrl.home">
                    Home
                </span>
                <span>
                    {{tagsCtrl.corner}}
                </span>
                </section>

            </section>
            <section layout="row"
                     layout-align="end center" class="vnb-hamburger">
                <md-button ng-show="!mainCtrl.user"
                           ng-click="mainCtrl.login()"
                            aria-label="login">
                    <i class="fa fa-facebook-square"></i>
                    <md-tooltip>Login</md-tooltip>
                </md-button>
                <section class="dropdown" ng-if="mainCtrl.user">
                    <img ng-src="{{'http://graph.facebook.com/' + mainCtrl.user.facebook_id + '/picture'}}"
                         alt="user"
                         class="header-face"/>
                        <span class="dropdown-toggle caret-container"
                              ng-show="(mainCtrl.user.positions.post_positions.length)">
                            <i class="fa fa-caret-down"></i>
                        </span>
                    <ul class="dropdown-menu" style="margin-left: -100px; margin-top: -10px">
                        <li ng-show="(mainCtrl.user.positions.post_positions.length)">
                            <a href ui-sref="create">New Post</a>
                        </li>
                        <li ng-show="mainCtrl.user.positions.manage_positions.length">
                            <a href ui-sref="manage">Manage</a>
                        </li>
                        <li ng-show="tagsCtrl.canEdit">
                            <a href ng-click="tagsCtrl.updateHeaderImage()">Change image</a>
                        </li>
                    </ul>
                </section>

            </section>
        </section>
    </md-toolbar>

    <md-content class="background-container">
        <md-tabs md-selected="data.selectedIndex">
            <md-tab id="tab2" aria-controls="tab2-content"
                    md-ink-ripple="#D1E8FF"
                    vnb-bg-color="{{mainCtrl.headerColor}}"
                >
                Updates
            </md-tab>
            <md-tab id="tab1" aria-controls="tab1-content"
                    md-ink-ripple="#D1E8FF"
                    vnb-bg-color="{{mainCtrl.headerColor}}"
                >
                Coming up
            </md-tab>
            <md-tab id="tab3" aria-controls="tab3-content"
                    md-ink-ripple="#D1E8FF"
                    vnb-bg-color="{{mainCtrl.headerColor}}"
                >
                Schedule
            </md-tab>
        </md-tabs>

        <ng-switch on="data.selectedIndex" class="tabpanel-container"
                   layout="row" layout-align="center start" flex>
            <div layout="row" layout-align="center start"
                 role="tabpanel" id="tab2-content"
                 aria-labelledby="tab2" ng-switch-when="0"
                 md-swipe-left="next()"
                 md-swipe-right="previous()"
                 flex>
                <section flex class="md-padding main-content"
                         style="max-width: 620px">
                    <section
                        ng-include="'components/tag/whats_new.html'"></section>
                </section>
            </div>
            <div layout="row" layout-align="center start"
                role="tabpanel" id="tab1-content"
                 aria-labelledby="tab1" ng-switch-when="1"
                 md-swipe-left="next()"
                 md-swipe-right="previous()"
                flex>
                <section flex class="md-padding main-content"
                         style="max-width: 620px">
                    <section
                        ng-include="'components/tag/coming_up.html'"></section>
                </section>
            </div>
            <div layout="row" layout-align="center start"
                 role="tabpanel" id="tab3-content"
                 aria-labelledby="tab3"
                 ng-switch-when="2" md-swipe-left="next()"
                 md-swipe-right="previous()"
                flex>
                <section ui-view="right"
                         style="padding-top: 6px; max-width: 620px"
                         flex></section>
            </div>
        </ng-switch>
    </md-content>
</md-content>
